{
  "transition_lookup": "SELECT *\nFROM transitions\nWHERE is_enabled = 1\n  AND signal_id = :signal_id\n  AND (\n        (match_any_state = 0 AND state_id = :state_id)\n        OR\n        (match_any_state = 1)\n      )\nORDER BY match_any_state ASC, priority ASC\nLIMIT 1;",
  "transition_next_state": "SELECT s.id AS next_state_id,\n       s.key AS next_state_key,\n       s.name AS next_state_name,\n       t.id AS transition_id,\n       t.guard_key AS guard_key,\n       t.action_key AS action_key\nFROM transitions t\nJOIN states s ON s.id = t.next_state_id\nWHERE t.is_enabled = 1\n  AND t.signal_id = :signal_id\n  AND (\n        (t.match_any_state = 0 AND t.state_id = :state_id)\n        OR\n        (t.match_any_state = 1)\n      )\nORDER BY t.match_any_state ASC, t.priority ASC, t.id ASC\nLIMIT 1;",
  "transition_next_state_by_signal_key": "SELECT s.id AS next_state_id,\n       s.key AS next_state_key,\n       s.name AS next_state_name,\n       t.id AS transition_id,\n       t.guard_key AS guard_key,\n       t.action_key AS action_key\nFROM transitions t\nJOIN states s ON s.id = t.next_state_id\nJOIN signals sig ON sig.id = t.signal_id\nWHERE t.is_enabled = 1\n  AND sig.is_enabled = 1\n  AND sig.key = :signal_key\n  AND (\n        (t.match_any_state = 0 AND t.state_id = :state_id)\n        OR\n        (t.match_any_state = 1)\n      )\nORDER BY t.match_any_state ASC, t.priority ASC, t.id ASC\nLIMIT 1;"
}
