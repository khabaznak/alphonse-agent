{% extends "base.html" %}

{% block content %}
  <main class="app-shell">
    {% include "partials/top_nav.html" %}
    <div class="shell-body">
      {% include "partials/sidebar_nav.html" %}
      <section class="content">
        <div class="section-header">
          <div class="subtitle">LAN pairing Â· AlphonseLink</div>
        </div>

        <section class="panel" id="lan-pairing">
          <h2>Pairing Code</h2>
          <p class="status-message">
            Generate a one-time code to pair a device on the same network.
          </p>
          <div class="actions">
            <button
              hx-post="/lan/pairing-code"
              hx-target="#lan-pairing-code"
              hx-swap="innerHTML"
            >
              Generate code
            </button>
          </div>
          <div id="lan-pairing-code" class="status-message">
            No active pairing code yet.
          </div>
        </section>

        <section class="panel" id="lan-devices">
          <h2>Paired Devices</h2>
          {% if devices %}
            <div class="table-wrap">
              <table>
              <thead>
                <tr>
                  <th>Device ID</th>
                  <th>Name</th>
                  <th>Paired At</th>
                  <th>Last Seen</th>
                </tr>
              </thead>
              <tbody>
                {% for device in devices %}
                  <tr>
                    <td>{{ device.device_id }}</td>
                    <td>{{ device.device_name or "Unnamed device" }}</td>
                    <td>{{ device.paired_at }}</td>
                    <td>{{ device.last_seen_at or "never" }}</td>
                  </tr>
                {% endfor %}
              </tbody>
              </table>
            </div>
          {% else %}
            <p class="status-message">No paired devices yet.</p>
          {% endif %}
        </section>
      </section>
    </div>
  </main>
{% endblock %}
